/**
 * Copyright (c) 2013 NSD CO., LTD. All Rights Reserved.
 */

/**
 * 文字数カウンタの設置
 */
$(window).load(function() {

	/*
	//maxlengthの設定があるすべての項目の場合
	$('[maxlength]').each(function(){
		$(this).after('<span class="countTip"></span>');
	});

	$('[maxlength]').trigger('keyup');
	*/

	//class=countSetを指定した項目のみ
	$('.countSet').each(function(){
		$(this).after('<span class="countTip"></span>');
	});

	//delay調整(ChromeVersionUp起因)
	var delay_time=50;
	setTimeout(function() {
		$('.countSet').trigger('keyup');
	},delay_time);

});
/**
 * 文字数カウンタ
 */
//$(document).on('keydown keyup change blur', '[maxlength]', function(){
$(document).on('keydown keyup change blur', '.countSet', function(){
//	var intext = $(this).val();
//	//maxlengthに合わせるため、改行は２文字換算にする。
//	intext = intext.replace(/[\n\r]/g,'改行');
//	intext = intext.replace(/[\r]/g,'改行');
//	intext = intext.replace(/[\n]/g,'改行');
//
//	var incnt = intext.length;
	var maxcnt = $(this).attr('maxlength');
//	if(incnt > maxcnt){incnt = maxcnt;}
//	$(this).next('.countTip').html(incnt + '/' + maxcnt);
//	$(this).attr('placeholder',incnt + '/' + maxcnt);
//	$(this).attr('moji',incnt + '/' + maxcnt);
//	$(this).next('.countTip').attr('moji',incnt + '/' + maxcnt);
	$(this).next('.countTip').attr('moji', maxcnt+'字以内');
//	$(this).next('.countTip').attr('moji', 'あと'+(maxcnt-incnt)+'字');
});